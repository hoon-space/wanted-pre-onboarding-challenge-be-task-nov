## 동시에 같은 DB Table row 를 업데이트 하는 상황을 방어하기 위해 어떻게 개발하실 건지 설명해주세요.

다수의 작업이 동시에 실행될 때 시스템이 어떻게 작동하는 지에 대한 개념을 설명하는 것을 **동시성**이라 한다. 동시에 같은 DB Table Row를 업데이트를 하게 되면, 예상과는 다르게 데이터가 수정되는 문제가 생긴다. 위의 문제를 해결하기 위해서는 **동시성을 제어**해야 한다.

### 트랜잭션
먼저 동시에 같은 DB 테이블 로우를 업데이트하면 교착 상태(Deadlock), 즉 둘 이상의 프로세스가 서로 작업이 끝나기를 기다리는 상태가 발생하게 된다. 이를 해결하기 위해서 우선 트랜잭션을 구현할 수 있다.<br>

트랜잭션이란 여러 데이터베이스 연산을 하나의 작업으로 묶는 행위를 뜻한다. 작업은 논리적인 단위로 그룹화되고, 각 트랜잭션은 데이터베이스 작업을 원자적 단위로 다룬다. 또한 트랜잭션은 `ACID(원자성, 일관성, 고립성, 지속성)`을 준수하여 데이터의 일관성을 보장한다.<br>

RDBMS에는 트랜잭션의 격리 수준(Transaction Isolation Level)을 제공한다. 이는 다중 트랜잭션 간에 얼마나 격리 되어야 하는지를 나타내는 개념으로, 질문과 같은 다중 트랜잭션 상황에서 동시에 데이터를 읽고 쓸 때 발생하는 문제를 관리하는 데 사용된다.<br>

```markdown
트랜잭션의 격리 수준

1. READ UNCOMMITTED (커밋되지 않은 데이터 읽기)
2. READ COMMITTED (커밋된 데이터 읽기)
3. REPEATABLE READ (반복 가능한 읽기)
4. SERIALIZABLE (직렬화 가능)
```

### 락
락(Lock)은 여러 트랜잭션이 동시에 처리될 때 데이터의 무결성을 보장하기 위한 수단이다. 하나의 트랜잭션이 처리되고 있을 때, 다음 트랙잭션이 잠시 기다렸다가 처리하여 **순서를 보장**한다.<br>
일단 락을 설정하면 다른 트랜잭션이 접근할 수 없다. 불필요하게 락을 설정하면 안정성은 올라가지만 성능은 저하된다. 이를 **잠금 비용**이라 하며 잠금 비용은 락을 통한 동시성 제어에 따른 트레이드 오프라 할 수 있다.<br>
따라서 락의 설정 범위(Level)을 지정하여 필요한 부분만 제어하는 것은 중요하다.
